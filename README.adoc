image:./img/nvim_dashboard.jpg[]

= NvME

/Àà…õnvi mi:/

Neovim **ME**ticulous Edition, crafted from scratch solely for **ME** with
every Human-Computer Interaction (HCI) perfectly engineered to fit **ME** needs
to offer supre**ME** comfort and comple**ME**nt **ME** workflow im**ME**nsely.

== ‚ö° Requirements

Kill Switch(TM) enabled features gets activated only if the related dependencies
are installed in PATH. So, the minimal required dependencies are:

* https://github.com/neovim/neovim[*Neovim*] (Needs to be built with LuaJIT)
* https://git-scm.com/[*git*]: For git integration, cloning plugin repos etc.

Installing the following dependencies activates plugins and features that require them:

* https://gcc.gnu.org/[*GCC*] or https://ziglang.org/[*Zig*]: For compiling treesitter language parsers | `nvim-treesitter`
* https://github.com/nodejs/node[*nodejs*]: For Language Servers and Formatters | `mason-tool-installer.nvim`
* https://github.com/tapio/live-server[*live-server*]: For local HTML Server | `Execute_order_69`
* https://github.com/BurntSushi/ripgrep[*ripgrep*]: For live grep | `snacks.nvim`
* https://github.com/sharkdp/fd[*fd*]: For Find Files | `snacks.nvim`
* https://github.com/vifm/vifm[*vifm*]: File Manager | `vifm.vim`
* https://github.com/jesseduffield/lazygit[*lazygit*]: Git UI | `snacks.nvim`
* https://github.com/kovidgoyal/kitty[*kitty*]: Kitty's Graphics Protocol for inline image/diagram rendering | `image.nvim`
* https://github.com/mermaid-js/mermaid-cli[*mermaid-cli*]: For rendering inline Mermaid Diagrams | `diagram.nvim`

== üõ∞Ô∏è Action Center

.üöÄ `Install Guide (auto backups prev config if any)`
[%collapsible]
====
[discrete]
== üöÄ Install

If any config is already present, it backups your config and puts NvME in place.

[discrete]
=== üêß Linux

[discrete]
==== Install Requirements

.Arch Based System (pacman)
[source,bash]
----
sudo pacman -S neovim git ripgrep fd vifm lazygit python npm mermaid-cli
sudo npm install -g live-server
----

[discrete]
==== Install NvME

.bash / zsh
[source,bash]
----
ME=~/.config/nvim; [ -d $ME ] && mv $ME ${ME}_backup/
git clone https://github.com/MidHunterX/NvME $ME && nvim
----

.fish
[source,fish]
----
set ME ~/.config/nvim; test -d $ME; and mv $ME {$ME}_backup
git clone https://github.com/MidHunterX/NvME $ME && nvim
----

[discrete]
=== ü™ü Windows

Some features like image preview needs a terminal with sixel or kitty graphics protocol support.
Kill Switch(TM) system disables features safely based on the available requirements installed in your system.

* Suggested Compiler for Tree-sitter: *Zig Compiler*

[discrete]
==== Install Requirements

.Windows Package Manager (winget)
[source,pwsh]
----
winget install Neovim.Neovim Git.Git
winget install zig.zig # Takes up-to 15 minutes to extract
winget install BurntSushi.ripgrep.MSVC sharkdp.fd JesseDuffield.lazygit
winget install OpenJS.NodeJS
----

Restart terminal

.Node Package Manager (npm)
[source,pwsh]
----
npm install -g @mermaid-js/mermaid-cli # Takes 5 minutes
npm install -g live-server
----

[discrete]
==== Install NvME

.powershell
[source,pwsh]
----
git clone https://github.com/MidHunterX/NvME $env:localappdata\nvim; nvim
----
====

.üö∂ `Uninstall Guide (go back to previous config if exists)`
[%collapsible]
====
[discrete]
== üö∂ Uninstall

Uninstalls NvME and returns back to previous config if any.

.bash / zsh
[source,bash]
----
ME=~/.config/nvim; [ -d $ME ] && rm -rf $ME && mv ${ME}_backup/ $ME
----

.fish
[source,fish]
----
set ME ~/.config/nvim; test -d $ME && rm -rf $ME; and mv ${ME}_backup/ $ME
----
====

.üå± `Programming Frameworks Integration Guide`
[%collapsible]
====
[discrete]
== üå± Programming Frameworks Integration

* Insert completion using `<C-f>` just like how it is done in fish shell

[discrete]
=== Django (Python)

* From `:Mason`, Install `pyright` Language Server

* Django uses some Python "magic" that makes having precise types for some code patterns problematic. To provide more precise static types and type inference for Django framework and be recognizable to pyright LSP, install:

----
pip install django-stubs
----

[discrete]
=== Java with OpenJDK

----
sudo pacman -S jdk21-openjdk
sudo archlinux-java set java-21-openjdk
----

[discrete]
=== Android SDK

[source,bash]
----
yay -Sy android-sdk \
      android-sdk-build-tools \
      android-sdk-cmdline-tools-latest \
      android-platform \
      android-sdk-platform-tools
----

android-sdk-platform-tools provides the `adb` command.

[discrete]
=== Flutter (Dart)

[source,bash]
----
yay -S flutter-bin
----

Now `flutter` command is available in `$PATH`. Create a new project using `flutter create myapp` and open it with `flutter run`.
====

== üé® Design Philosophy

image:./img/nvim_record.jpg[]

Important Stuff on Top Left Side::
Left side is where your eyes linger most of the time when coding. Therefore the
most important stuff happens directly near your line of sight. Macro Record
Status possess high importance until recording is stopped. Therefore it stays
on left side only for the time being recorded for a macro.

Less Important Stuff on Top Right Side::
Buffer list is not needed at all times, therefore it doesn't have that much
importance to interfere with the code in buffer.

Yank into System Clipboard by Default::
Text is copied to system clipboard almost on every other apps; why should there
be an exception here. Less hassle when copy pasting between windows frequently.

Scroll past EOF in buffer with `j`::
Personal preference for EOF to not be stuck at the bottom of the screen. Keys
should always do something.

Jump to line ends and paragraphs with `H` and `L`::
H and L should be the extreme counterparts of h and l. No exceptions. After
that, it jumps paragraphs (which is disabled in macro mode).

.`üí° Learn More`
[%collapsible]
====
[discrete]
=== SmartMotion: Redefining `H` and `L`

If `A` means ‚Äòinsert further right‚Äô and `I` means ‚Äòinsert further left‚Äô, then
`H` should mean ‚Äòmove further left‚Äô (line-wise), and `L` should mean ‚Äòmove
further right‚Äô. Thus H and L is corrected semantically by following vim
conventions.

Now, what should happen when I'm already at the edge? It does nothing? No.
Pop it off into the next gap so, I can use one key for multiple things in a
controlled manner.

* When at the beginning of a line, H jumps to the previous paragraph `{`.
* When at the end of a line, L jumps to the next paragraph `}`.

NOTE: Paragraph jumping is intended for general navigational purposes only. Therefore
it is disabled in macro mode.
====

== ‚ú® Features

image:./img/nvim_hitfont.jpg[]

* Matugen generated Material You palette based Dynamic UI coloring
* Setting env `NVIM_OPEN_SIDEBAR=1` auto opens sidebar after opening a file.
* Convert text to Hit Font with `:HitFont` and L337 SP34K with `:LeetSpeak`
* Trim trailing lines and Write Buffer with `<leader>w`
* Git Commit with `<leader>gc` using Lazygit
* Run/Execute files with `F5`, `<leader>ru` or `:lua Execute_order_69()`
* Run file formatter with `<leader>fm` or `:lua Run_formatter()`
* Custom made CMP auto-completion for git commit messages and regular expression matching

=== üå≥ Treesitter Node Manipulation

`treesitter_walker.lua`

*Navigate* through nodes with `<C-hjkl>`. On a well formatted code, think of this as moving through the indent lines vertically and jumping between the indent lines horizontally.

*Swap* those nodes around with `<C-HJKL>`.

`treesitter_split-join.lua`

*Split* and *Join* nodes with `<leader-j>` and `<leader-J>`.

.`‚ÑπÔ∏è Other Treesitter Related Features`
[%collapsible]
====
* `treesitter_context.lua`: Show context code on top of buffer. Breadcrumbs are almost useless in comparison.
* `treesitter_playground.lua`: Live playground to view the Treesitter AST and play with it using `:TSPlaygroundToggle`.
====

=== ‚≠ê Developer Experience

`indent_lines.lua`

*Code indentation lines* which highlights the current https://en.wikipedia.org/wiki/Scope_(computer_science)[scope]. The scope is not the current indentation level! Instead, it is the indentation level where variables or functions are accessible. This depends on the language you are writing. The highlight colors are matched with the colors of brackets for a more visually cohesive experience.

`regex_spectre.lua`

Toggle a specialized regex search and replace UI in buffer with `<leader>ur` and globally with `<leader>uR`. Since this uses ripgrep (rg), you can just write pure escape code pollution free beautiful regex. Close the UI with `q` or `<ESC>`.

`regex_multi-patterns.lua`

Mark multiple patterns with `<leader>m` and navigate with `n` as usual. Use `<leader>em` to Erase Marks.

`flash.lua`

*Leap* to any text with `s` (Search) and select any Treesitter node with `S` (Select TS). These are also available as an adverb in vim motion grammar using `r` (Remotely) and `R` (Remotely TS) instead (e.g. yr<search_text>iw).

.`‚ÑπÔ∏è Other DX Related Features`
[%collapsible]
====
* `comment.lua`: *Toggle comment* with `gcc` (line-wise) and `gbb` (block-wise). Works with `<motion>` as well (gbip, gc2k, ...).
* `comment_todo.lua`: *TODO comment* highlighting. You can search for all TODOs with `<leader>st` - powered by `snacks.lua`.
* `toggle_boolean.lua`: *Toggle values* between (true, false), (enable, disable) with increment and decrement fallback. Everything with `C-a` and `C-x`.
* `formatter.lua`: *Format* code with `<leader>fm`. Formatters can be installed with `:Mason`
* `indent_guess.lua`: Automatically detects and applies indentation settings to the current buffer.
* `language_server_protocol.lua`: *LSP* integration for different languages. Different integrations can be manually added with `:Mason`.
* `lsp_rename.lua`: Mass rename variables and functions in *LSP* with `<leader>rn`
* `snacks.lua`: A collection of QoL plugins by Folke. Search, Explorers and Lazygit included.
* `vifm.lua`: Manage and Explore files and folders with `<leader>pf` (Project Files)
====

=== ü´∂ Bracket Manipulation

`bracket_surround.lua`

*<bracket>* = [a]ngle bracket `>` | [b]racket `)` | [B]race `}` | [r]ectangle bracket `]` | [q]uote `"` `'`

[%header]
|===
| Keybinding                   | Description
| `ds <bracket>`               | Delete Surrounding <bracket>
| `cs <bracket> <new-bracket>` | Change Surrounding <bracket> to <new-bracket>
| `cS <bracket> <new-bracket>` | Change Surrounding <bracket> to <new-bracket> (split-line)
| `gs <motions> <bracket>`     | Go Surround <motion/selection> with <bracket>
| `gS <motions> <bracket>`     | Go Surround <motion/selection> with <bracket> (split-line)
| `gsl <bracket>`              | Go Surround Line with <bracket>
| `gSl <bracket>`              | Go Surround Line with <bracket> (split-line)
|===

.`‚ÑπÔ∏è Other Bracket Related Features`
[%collapsible]
====
*<tag>* = Markup Tags like `<div>`, `<p>`, `<a href="..." title="...">`, `<Dataset xmlns="...">`

[%header]
|===
| Keybinding                              | Description
| `dst <tag-name> <new-tag>`              | Delete Surrounding <tag-name>
| `cst <tag-name> <new-tag>`              | Change Surrounding <tag-name> to <new-tag>
| `csT <tag-contents> <new-tag-contents>` | Change Surrounding <tag-contents> with <new-tag-contents>
|===

* `bracket_rainbow.lua`: Colorizes bracket pairs based on their nesting level. The colors are inspired from "Bracket Pair Colorizer" VSCode extension; which was then adopted as VSCode core feature.
* `bracket_matchparen.lua`: Highlights matching bracket pair when cursor is anywhere inside the block. An improved version of inbuilt matchparen.
* `bracket_autopairs.lua`: Autoclose brackets, quotes, etc. when typing them. Disabled in macro mode.
====

=== üêû AI Assisted Debugging

`ai_lsp_diagnostics.lua`

Helps you work out WTF that code error means *and* how to fix it!

[%header]
|===
| Keybinding   | Description
| `<leader>wd` | WTF Debug: Give me the simplified explanation of this error
| `<leader>wf` | WTF Fix: Just make this error disappear automatically
| `<leader>ws` | WTF Search: Google this error
| `<leader>wp` | WTF Provider: List and choose an LLM provider
|===

NOTE: Since this keybind conflicts with `<leader>w` (save file), this mode can only be activated by pressing `<leader>` and waiting for 1 second.

.`üí° How to set up?`
[%collapsible]
====
To install, just export the LLM API key of your choice as an environment variable. For example:

[source,bash]
----
# Gemini
export GEMINI_API_KEY=NznytnzngvbaBsPungTCGnaqTbbtyrFrnepu-NcvUrer

# OpenAI
export OPENAI_API_KEY=sk-XrlGbGurNyyrtrqylBcraShyylPybfrqNVPbzcnalNCVUrer
----

Supports: ANTHROPIC, COPILOT, DEEPSEEK, GEMINI, GROK, OLLAMA, OPENAI.

Then just select your provider using `<leader>wp` and you are good to go.

====

=== üöΩ AI Code Completion

`ai_windsurf.lua`

[%header]
|===
| Keybinding | Description
| `<C-f>`    | Accept Full completion (like in fish shell)
| `<M-,>`    | Cycle through completions
|===

This feature is enabled by default. But you can toggle AI Code Completion with
`:Codeium Toggle`

.`üí° How to set up?`
[%collapsible]
====

* Create a Windsurf account and get an API key.
* Authorize Windsurf (Codeium) using:

[source,lua]
----
:Codeium Auth
----

* Follow the rest of the instructions to get started.

After that, auto-completion will be available for use in the current buffer as you type.

====

=== üé® UI Enhancements

`tool_colorpicker.lua`

*Pick colors* with `:CccPick`. Then use `i` to change input mode, `o` to change output format and `q` to quit selection.

`visible_colorcodes.lua`

Visualize color codes in buffer. Supported formats are Hex #RGBA, Termcode colorname, CSS rgba(), CSS hsla(), Tailwind Colors

.`‚ÑπÔ∏è Other UI Related Features`
[%collapsible]
====
* `markdown_UI.lua`: Renders Markdown components like Headings, Tables, Code Blocks, Checkboxes, Blockquotes, Links etc..
* `markdown_inline-image.lua`: Renders image under cursor using Kitty's Graphics Protocol or ueberzugpp. It works great with Kitty and Tmux.
* `markdown_inline-diagram.lua`: Renders diagrams using Mermaid CLI and Kitty's Graphics Protocol.
* `colorschemes.lua`: *Syntax highlighting* with Catppuccin colorscheme
* `gitsigns.lua`: *Git integration* on Signcolumn, git chunk navigation and more.
* `lsp_inline-diagnostics.lua`: Beautiful and aesthetic *Inline diagnostics* for *LSP* errors
* `noice_ui.lua`: Completely replaces the UI for messages, cmdline and the popupmenu by Folke.
* `statusline.lua`: Lualine.nvim with Matugen dynamic color support.
* `which-key.lua`: Helps you remember/discover keymaps, by showing available keybindings in a popup as you type.
====

=== üç∫ Paying Homage

`column_line.lua`

Thin virtual vertical line at 80th column. Much nicer and visually less intrusive than the default color column. Punchcards typically used to have 80 column width. Early terminals screens also had a fixed display width of 80 characters. Keeping code within this limit prevented unsightly line wrapping and made it more readable.
Even now, when doing multi window workflow, keeping it under 80 columns will make everything look nice and readable as well.

=== üéÆ Fun Features

`typing-sounds.lua`

8-bit sound effects as a feedback for your input interactions. There are no audio file dependency as the sounds are programmatically generated with wavetype, sustain, punch, frequency, arpeggio, decay, resonance, lowpass filter etc.

`typing-practice.lua`

Practice typing speed with `:Typr` and view your overall progress timeline, per letter accuracy analysis etc. with `:TyprStats`.

== üìù Autocompletion Behaviour

image:./img/nvim_cmp.jpg[]

`autocompletion.lua`

* Autocompletion suggestions keep popping while typing
* If the suggestion box is visible, you can do the following:
* Select Next entries with: `C-n`, `Down`
* Select Previous entries with: `C-p`, `Up`
* Accept an entry with `CR`, `i`, `C-i`
* Cancel Completion with `C-e`, `o`, `C-o`

Note: `TAB` does multiple things here

* If accepted entry is a snippet and snippet is expanded, use `TAB` & `S-Tab` for jumping around the snippet fields.
* If autocompletion menu is visible, use `TAB` to select LSP pre-selected entry.
* If LSP pre-selected entry is not available in menu, `TAB` will select the first entry.
* If menu and snippet are both not visible, `TAB` will jump over quotes and brackets powered by `tabout.lua`.
* If quotes and brackets are not available, `TAB` will act as normal `TAB`.

`autocompletion_colorful-menu.lua`: Treesitter parsed syntax highlighting for autocompletion entries

.`üí° Show Completion Workflows`
[%collapsible]
====

[discrete]
=== Autocompletion: Terminal Style
[source,yaml]
----
Select: Tab, S-Tab
Accept: Enter
----

[discrete]
=== Autocompletion: Ide Style
[source,yaml]
----
Select: Down, Up
Accept: Enter
----

[discrete]
=== Autocompletion: Vim / Emacs Style
[source,yaml]
----
Select: C-n, C-p
Accept: Enter
Reject: C-e
----

[discrete]
=== Autocompletion: Personal Style
[source,yaml]
----
Select: Down, Up / Tab, S-Tab
Accept: i
Reject: o
----

====

== üî•‚úçÔ∏è Improved Grammar

----
Sentence = Verb [Adverb [<location>]] Preposition Noun
----

.`‚ÑπÔ∏è See full structure`
[%collapsible]
====
----
Sentence = [Quantifier] Verb [Adverb [<location>]] Preposition [Quantifier] Noun
----

[discrete]
==== Quantifiers

|===
| `[0-9]` | N times
|===
====

==== Verbs (Actions)

|===
| `y` | Yank
| `d` | Delete
| `c` | Change
|===

==== Adverbs (Modifiers)

`flash.lua`
|===
| `r` | Remotely
| `R` | Remotely (Treesitter)
|===

==== Prepositions (Relationship)

|===
| `i` | Inside
| `a` | Around
|===

==== Nouns (Objects)

|===
| `w` | Word
| `p` | Paragraph
| `s` | Sentence
| `t` | Markup Tag
| `b` | Bracket `()`
| `B` | Block/Brace `{}`
| `"` `'` `'` `"`
| Strings
| `[` `{` `(` `)` `}` `]`
| Brackets
|===

`treesitter.lua`
|===
| `i` | Conditional
| `l` | Loop
| `f` | Function
| `f` | Fenced Code Block (Markdown)
| `m` | Method
| `c` | Class
| `a` | Argument
| `=` | Assignment
| `:` | Property
|===

== üó∫Ô∏è Custom Key Remaps

image:./img/nvim_plugins.jpg[]

=== Normal Mode
[%header]
|===
| Key     | Description
| `u`     | Undo
| `U`     | Redo
| `H`     | Smart Motion to Line Start (`^` or `{`)
| `L`     | Smart Motion to Line End (`$` or `}`)
| `<C-u>` | Scroll Half Page Up (Cursor Centered)
| `<C-d>` | Scroll Half Page Down (Cursor Centered)
| `mm`    | Jump to Matching Bracket
| `<A-h>` | Go to Previous Buffer
| `<A-l>` | Go to Next Buffer
| `<C-h>` | Go to Previous Tab
| `<C-l>` | Go to Next Tab
| `<F5>`  | Execute Current Buffer (`:lua Execute_order_69()`)
| `g?`    | ROT13 Cipher (default, with description)
|===

=== Visual Mode
[%header]
|===
| Key | Description
| `J` | Move Line Down with Autoindent
| `K` | Move Line Up with Autoindent
| `<` | Indent Line/Selection Left (stay in Visual mode)
| `>` | Indent Line/Selection Right (stay in Visual mode)
| `H` | Smart Motion to Line Start (`^` or `{`)
| `L` | Smart Motion to Line End (`$` or `}`)
|===

=== Terminal Mode
[%header]
|===
| Key          | Description
| `<C-n>n`     | Return to Normal Mode
| `<C-w>n`     | Return to Normal Mode
| `<C-w><ESC>` | Return to Normal Mode
|===

=== Leader Remaps
[%header]
|===
| Key          | Description
| `<Space>`    | Leader
| `<leader>w`  | Write File
| `<leader>er` | Erase Search Highlight
| `<leader>rr` | Highlight & Replace Word
| `<leader>y`  | Yank Entire Buffer
| `<leader>us` | Toggle Spell Check
| `<leader>d`  | Delete Without Yanking
| `<leader>p`  | Paste Without Yanking
|===

=== Buffer & Tab Management

`buffer_selector.lua`

View all open buffers and switch between buffers with `<leader>b`. Then open buffer with tag letters or `<CR>`, `V` to vsplit, `H` to hsplit, `D` to close and `q` or `esc` to cancel selection.

Use `<M-hl>` (Alt+H / Alt+L) to move through buffers.

[%header]
|===
| Key             | Description
| `<leader>tn`    | Tab: New
| `<leader>tc`    | Tab: Create
| `<leader>tx`    | Tab: Exit
| `<leader>tq`    | Tab: Quit
| `<leader>tX`    | Tab: Exit Other Tabs
| `<leader>tQ`    | Tab: Quit Other Tabs
| `<leader>th`    | Tab: Previous
| `<leader>tl`    | Tab: Next
| `<leader><A-h>` | Tab: Previous
| `<leader><A-l>` | Tab: Next
|===

=== GUI Style Remaps
[%header]
|===
| Key     | Description
| `<C-s>` | Save Document (Normal/Insert mode)
|===
